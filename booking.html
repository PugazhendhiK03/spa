<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxe Bali Spa - Book Your Session</title>
    <meta name="description" content="Book your premium men's spa experience at Luxe Bali Spa. Choose from our range of services and schedule your appointment.">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/booking.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <header class="header">
        <div class="header__container">
            <a href="index.html" class="logo">Luxe Bali Spa</a>
            <nav class="nav">
                <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
                    <li class="nav__item"><a href="about.html" class="nav__link">About</a></li>
                    <li class="nav__item"><a href="services.html" class="nav__link">Services</a></li>
                    <li class="nav__item"><a href="contact.html" class="nav__link">Contact</a></li>
                    <li class="nav__item"><a href="booking.html" class="btn btn--primary">Book Now</a></li>
                </ul>
                <div class="nav__mobile-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <section class="page-hero" style="background-image: url('assets/images/hero.jpg');">
        <div class="page-hero__overlay"></div>
        <div class="page-hero__content">
            <h1 class="page-hero__title">Book Your Session</h1>
            <p class="page-hero__subtitle">Experience premium relaxation tailored for you</p>
        </div>
    </section>

    <section class="booking-process">
        <div class="container">
            <div class="booking-steps">
                <div class="booking-step active" data-step="1">
                    <div class="booking-step__number">1</div>
                    <div class="booking-step__title">Services</div>
                </div>
                <div class="booking-step" data-step="2">
                    <div class="booking-step__number">2</div>
                    <div class="booking-step__title">Date & Time</div>
                </div>
                <div class="booking-step" data-step="3">
                    <div class="booking-step__number">3</div>
                    <div class="booking-step__title">Details</div>
                </div>
                <div class="booking-step" data-step="4">
                    <div class="booking-step__number">4</div>
                    <div class="booking-step__title">Confirm</div>
                </div>
            </div>

            <div class="booking-step__content active" data-step-content="1">
                <h2 class="section__title">Select Your Services</h2>
                <p class="section__subtitle">Choose one or more services for your session</p>
                <div class="service-selection__grid">
                    <div class="service-selection__card">
                        <input type="checkbox" id="service-swedish" class="service-selection__checkbox" data-price="1300" data-duration="60">
                        <label for="service-swedish" class="service-selection__label">
                            <h3 class="service-selection__title">Swedish Massage</h3>
                            <div class="service-selection__price">₹1300</div>
                            <div class="service-selection__duration">60 minutes</div>
                            <p class="service-selection__desc">Classic relaxation massage with long, flowing strokes.</p>
                        </label>
                    </div>
                    <div class="service-selection__card">
                        <input type="checkbox" id="service-deep-tissue" class="service-selection__checkbox" data-price="1500" data-duration="60">
                        <label for="service-deep-tissue" class="service-selection__label">
                            <h3 class="service-selection__title">Deep Tissue Massage</h3>
                            <div class="service-selection__price">₹1500</div>
                            <div class="service-selection__duration">60 minutes</div>
                            <p class="service-selection__desc">Targeted therapy for chronic muscle tension and pain relief.</p>
                        </label>
                    </div>
                    <div class="service-selection__card">
                        <input type="checkbox" id="service-balinese" class="service-selection__checkbox" data-price="1800" data-duration="90">
                        <label for="service-balinese" class="service-selection__label">
                            <h3 class="service-selection__title">Balinese Massage</h3>
                            <div class="service-selection__price">₹1800</div>
                            <div class="service-selection__duration">90 minutes</div>
                            <p class="service-selection__desc">Traditional Indonesian massage combining acupressure and aromatherapy.</p>
                        </label>
                    </div>
                    
                </div>
                <div class="booking-step__navigation">
                    <button class="btn btn--secondary" disabled>Previous</button>
                    <button class="btn btn--primary next-step" data-next="2">Next</button>
                </div>
            </div>

            <div class="booking-step__content" data-step-content="2">
                <h2 class="section__title">Select Date & Time</h2>
                <p class="section__subtitle">Choose a convenient date and time for your appointment</p>
                <div class="datetime-selection">
                    <input type="text" id="booking-date" class="datetime-selection__input" placeholder="Select date">
                    <div class="time-slots">
                        <p>Please select a date first</p>
                    </div>
                </div>
                <div class="booking-step__navigation">
                    <button class="btn btn--secondary prev-step" data-prev="1">Previous</button>
                    <button class="btn btn--primary next-step" data-next="3" disabled>Next</button>
                </div>
            </div>

            <div class="booking-step__content" data-step-content="3">
                <h2 class="section__title">Your Information</h2>
                <p class="section__subtitle">Please provide your details to complete the booking</p>
                <form id="customer-form" class="customer-form">
                    <div class="form-group">
                        <label for="customer-name">Full Name*</label>
                        <input type="text" id="customer-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="customer-email">Email Address*</label>
                        <input type="email" id="customer-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="customer-phone">Phone Number*</label>
                        <input type="tel" id="customer-phone" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="customer-whatsapp">WhatsApp Number*</label>
                        <input type="tel" id="customer-whatsapp" name="whatsapp" required>
                        <small class="form-hint">We'll send booking confirmation to this number</small>
                    </div>
                    <div class="form-group">
                        <label for="customer-notes">Special Requests (Optional)</label>
                        <textarea id="customer-notes" name="notes" rows="4"></textarea>
                    </div>
                    <input type="hidden" id="booking-services" name="services">
                    <input type="hidden" id="booking-date-value" name="date">
                    <input type="hidden" id="booking-time" name="time">
                    <input type="hidden" id="booking-total" name="total">
                    <input type="hidden" id="booking-duration" name="duration">
                </form>
                <div class="booking-step__navigation">
                    <button class="btn btn--secondary prev-step" data-prev="2">Previous</button>
                    <button class="btn btn--primary next-step" data-next="4">Next</button>
                </div>
            </div>

            <div class="booking-step__content" data-step-content="4">
                <h2 class="section__title">Confirm Your Booking</h2>
                <p class="section__subtitle">Review your booking details before confirmation</p>
                <div class="booking-summary">
                    <!-- Summary will be generated by JavaScript -->
                </div>
                <div class="booking-confirmation">
                    <button class="btn btn--primary confirm-booking">Confirm Booking</button>
                </div>
                <div class="booking-step__navigation">
                    <button class="btn btn--secondary prev-step" data-prev="3">Previous</button>
                </div>
            </div>
        </div>
    </section>

    <div class="modal" id="success-modal">
        <div class="modal__content">
            <div class="modal__icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="modal__title">Booking Confirmed!</h2>
            <p class="modal__text">Your appointment has been successfully booked.</p>
            <p class="modal__ref">Booking Reference: <span id="booking-reference"></span></p>
            <div class="modal__actions">
                <button class="btn btn--primary" id="download-receipt">Download Receipt</button>
                <a href="index.html" class="btn btn--secondary">Back to Home</a>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer__grid">
                <div class="footer__col">
                    <h3 class="footer__title">Luxe Bali Spa</h3>
                    <p class="footer__text">Rejuvenation for men by men. Premium spa treatments designed specifically for men's needs.</p>
                    <div class="footer__social">
                        <a href="#" class="social__link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social__link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social__link"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer__col">
                    <h3 class="footer__title">Quick Links</h3>
                    <ul class="footer__links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="booking.html">Book Now</a></li>
                    </ul>
                </div>
                <div class="footer__col">
                    <h3 class="footer__title">Contact Info</h3>
                    <ul class="footer__contact">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Spa Street, Mumbai, India</li>
                        <li><i class="fas fa-phone"></i> +91 98765 43210</li>
                        <li><i class="fas fa-envelope"></i> info@luxebalispa.com</li>
                    </ul>
                </div>
                <div class="footer__col">
                    <h3 class="footer__title">Opening Hours</h3>
                    <ul class="footer__hours">
                        <li>Monday - Friday: 10am - 8pm</li>
                        <li>Saturday: 9am - 9pm</li>
                        <li>Sunday: 10am - 6pm</li>
                    </ul>
                </div>
            </div>
            <div class="footer__bottom">
                <p>&copy; 2023 Luxe Bali Spa. All rights reserved.</p>
                <div class="footer__legal">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="js/booking.js"></script>
    <script src="js/global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // Check for required libraries
        if (typeof flatpickr === 'undefined' || typeof html2canvas === 'undefined') {
            console.error('Required libraries not loaded');
            document.addEventListener('DOMContentLoaded', function() {
                const errorModal = document.createElement('div');
                errorModal.className = 'modal';
                errorModal.id = 'error-modal';
                errorModal.innerHTML = `
                    <div class="modal__content">
                        <div class="modal__icon">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        <h2 class="modal__title">System Error</h2>
                        <p class="modal__text">Required resources failed to load. Please refresh the page or contact support.</p>
                        <div class="modal__actions">
                            <button class="btn btn--primary" onclick="window.location.reload()">Refresh Page</button>
                            <a href="tel:+919876543210" class="btn btn--secondary">
                                <i class="fas fa-phone"></i> Call Support
                            </a>
                        </div>
                    </div>
                `;
                document.body.appendChild(errorModal);
                errorModal.style.display = 'flex';
            });
        }
    </script>
</body>
</html>